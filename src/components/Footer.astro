---

import { profileConfig } from "../config";
import { url } from "../utils/url-utils";

const currentYear = new Date().getFullYear();

// Vercel Git environment variables
const commitSha = import.meta.env.VERCEL_GIT_COMMIT_SHA;
const commitMessage = import.meta.env.VERCEL_GIT_COMMIT_MESSAGE;
const commitAuthor = import.meta.env.VERCEL_GIT_COMMIT_AUTHOR_NAME;
const commitRef = import.meta.env.VERCEL_GIT_COMMIT_REF;

// Format commit SHA to short version (first 7 characters)
const shortSha = commitSha ? commitSha.slice(0, 7) : null;

// Build the GitHub commit URL
const repoUrl = "https://github.com/aadishsamir123/blog";
const commitUrl = commitSha ? `${repoUrl}/commit/${commitSha}` : null;
---

<!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">-->
<div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div>
<!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">-->
<div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6">
    <div class="transition text-50 text-sm text-center">
        &copy; <span id="copyright-year">{currentYear}</span> {profileConfig.name}. All Rights Reserved. /
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href={url('rss.xml')}>RSS</a>
        Powered by
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/saicaca/fuwari">Fuwari</a>
    </div>
    
    {commitSha && (
        <div class="transition text-50 text-xs text-center mt-3 opacity-60">
            Deployed from commit 
            <a 
                class="transition link text-[var(--primary)] font-mono font-medium hover:opacity-80" 
                target="_blank" 
                href={commitUrl}
                title={commitMessage}
            >
                {shortSha}
            </a>
            {commitRef && ` on ${commitRef}`}
            {commitAuthor && ` by ${commitAuthor}`}
        </div>
    )}
</div>